# ES6 實踐經典排序法 (2)

## 產生隨機測試陣列

為了測試排序結果，
需要每次產生一個隨機陣列

```javascript
// 產生 min 到 max 間的亂數，包含 min, max
const getRandomNum = (min, max) => {
  return Math.floor(Math.random() * (max - min + 1)) + min;
};

// 產生長度為 length 的隨機陣列
const getTestArr = ({ length = 10, min = 0, max = 10 }) => {
  let arr = [];
  for (let i = 0; i < length; i++) {
    arr.push(getRandomNum(min, max));
  }
  return arr;
};

// 產生一個 10項，每項為 0~100 的 array
const testArr = getTestArr({ max: 100 });
```

## 排序過程動畫

視覺化解釋排序法：[VisuAlgo - Sorting (Bubble, Selection, Insertion, Merge, Quick, Counting, Radix)](https://visualgo.net/en/sorting)

## 經典的排序法

參考 [一起用 JavaScript 來複習經典排序法吧！](http://huli.logdown.com/posts/2223627-review-the-classical-sort-algorithm-with-javascript)，
試著自己實做出這些排序法。

以下的範例程式碼，
可以直接貼到瀏覽器 console 中看結果

### 合併排序法（Merge Sort）

![img](/home/newtchen/Documents/MyProjects/git-notebook/source/img/merge.png)

來源：http://www.java2novice.com/java-sorting-algorithms/merge-sort/

```javascript
const mergeSort = arr => {
  /**
   * 合併兩個已經排序好的 array ，
   * 這個 function 先提出來寫好，
   * 便於釐清後面 mergeSort 的主體邏輯
   */
  const getMergedArr = (arr1, arr2) => {
    const clone1 = [...arr1];
    const clone2 = [...arr2];

    // 兩個 array 依序拿出第一個來比大小，
    // 小的就先放進最終的 mergedArr 中
    const mergedArr = [];
    while (clone1.length > 0 && clone2.length > 0) {
      if (clone1[0] < clone2[0]) {
        mergedArr.push(clone1.shift());
      } else {
        mergedArr.push(clone2.shift());
      }
    }
    // 執行到這裡代表 clone1, clone2 其中一個空了，
    // 所以我們要找出沒空那一個 array，
    // 並把它剩下的數字全部填到 mergedArr 最後
    const isClone2Empty = clone1.length > 0;
    (isClone2Empty ? clone1 : clone2).forEach(num => mergedArr.push(num));

    return mergedArr;
  };

  /**
   * 正式開始進行 "合併排序"
   */
  const length = arr.length;
  // 只有一項不需要排序
  if (length < 2) return arr;
  // 找中間點
  const medianIndex = Math.floor(length / 2);
  // 取第一項到中間點，不含中間點
  const arr1 = arr.slice(0, medianIndex);
  // 取中間點到最後
  const arr2 = arr.slice(medianIndex);
  return getMergedArr(mergeSort(arr1), mergeSort(arr2));
};

console.log('--------');
console.log('unsorted arr', testArr);
console.log('mergeSort arr', mergeSort(testArr));
console.log('--------');
```



## References

http://huli.logdown.com/posts/2223627-review-the-classical-sort-algorithm-with-javascript

https://visualgo.net/en/sorting

https://hiskio.com/courses/127